@let enabledLanguages = i18n.enabledLanguages;
@let currentLanguage = i18n.currentLanguage;
@let url = kcContext.url;
@let features = kcContext.features;
@let realm = kcContext.realm;
@let message = kcContext.message;
@let referrer = kcContext.referrer;
@let activeLink = active();

<header class="navbar navbar-default navbar-pf navbar-main header">
  <nav
    class="navbar"
    role="navigation"
  >
    <div class="navbar-header">
      <div class="container">
        <h1 class="navbar-title">Keycloak</h1>
      </div>
    </div>
    <div class="navbar-collapse navbar-collapse-1">
      <div class="container">
        <ul class="nav navbar-nav navbar-utility">
          @if (enabledLanguages.length > 1) {
            <li>
              <div
                class="kc-dropdown"
                id="kc-locale-dropdown"
              >
                <a
                  href="#"
                  id="kc-current-locale-link"
                >
                  {{ currentLanguage.label }}
                </a>
                <ul>
                  @for (enabledLanguage of enabledLanguages; track enabledLanguage.languageTag) {
                    @let label = enabledLanguage.label;
                    @let href = enabledLanguage.href;

                    <li class="kc-dropdown-item">
                      <a [href]="href">{{ label }}</a>
                    </li>
                  }
                </ul>
              </div>
            </li>
          }
          @if (!!referrer?.url) {
            <a
              [href]="referrer?.url"
              id="referrer"
            >
              {{ 'backTo' | msgStr: referrer?.name }}
            </a>
          }
          <li>
            <a [href]="url.getLogoutUrl()">{{ 'doSignOut' | msgStr }}</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<div class="container">
  <div class="bs-sidebar col-sm-3">
    <ul>
      <li [ngClass]="{ active: activeLink === 'account' }">
        <a [href]="url.accountUrl">{{ 'account' | msgStr }}</a>
      </li>
      @if (features.passwordUpdateSupported) {
        <li [ngClass]="{ active: activeLink === 'password' }">
          <a [href]="url.passwordUrl">{{ 'password' | msgStr }}</a>
        </li>
      }
      <li [ngClass]="{ active: activeLink === 'totp' }">
        <a [href]="url.totpUrl">{{ 'authenticator' | msgStr }}</a>
      </li>
      @if (features.identityFederation) {
        <li [ngClass]="{ active: activeLink === 'social' }">
          <a [href]="url.socialUrl">{{ 'federatedIdentity' | msgStr }}</a>
        </li>
      }
      <li [ngClass]="{ active: activeLink === 'sessions' }">
        <a [href]="url.sessionsUrl">{{ 'sessions' | msgStr }}</a>
      </li>
      <li [ngClass]="{ active: activeLink === 'applications' }">
        <a [href]="url.applicationsUrl">{{ 'applications' | msgStr }}</a>
      </li>
      @if (features.log) {
        <li [ngClass]="{ active: activeLink === 'log' }">
          <a [href]="url.logUrl">{{ 'log' | msgStr }}</a>
        </li>
      }
      @if (realm.userManagedAccessAllowed && features.authorization) {
        <li [ngClass]="{ active: activeLink === 'authorization' }">
          <a [href]="url.resourceUrl">{{ 'myResources' | msgStr }}</a>
        </li>
      }
    </ul>
  </div>

  <div class="col-sm-9 content-area">
    @if (message) {
      <div [ngClass]="['alert', 'alert-' + message.type]">
        @switch (message.type) {
          @case ('success') {
            <span class="pficon pficon-ok"></span>
          }
          @case ('error') {
            <span class="pficon pficon-error-circle-o"></span>
          }
        }
        <span
          class="kc-feedback-text"
          [innerHTML]="message.summary | kcSanitize: 'html'"
        ></span>
      </div>
    }
    <ng-content select="[content]"></ng-content>
  </div>
</div>
